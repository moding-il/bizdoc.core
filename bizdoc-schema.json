{
  "$schema": "http://json-schema.org/draft-04/schema",
  "title": "BizDoc Configuration Schema",

  "type": "object",

  "definitions": {
    "event": {
      "type": "object",
      "properties": {
        "Event": {
          "type": "string",
          "enum": [ "Start", "Intermediate", "NonInterruptingStart", "NonInterruptingIntermediate", "ThrowingIntermediate", "End" ]
        },
        "Trigger": {
          "type": "string",
          "enum": [
            "None",
            "Timer",
            "Message",
            "Conditional",
            "Link",
            "Signal",
            "Error",
            "Escalation",
            "Termination",
            "Cancel",
            "Compensation",
            "Parallel",
            "Multiple"
          ]
        }
      },
      "required": [ "Event" ]
    },
    "node_base": {
      "properties": {
        "Id": {
          "type": "string"
        },
        "AddInfo": {
          "type": "object",
          "properties": {
            "actionName": {
              "type": "string"
            },
            "Case": { "type": "string" }
          }
        }
      },
      "required": [
        "Id"
      ]
    },
    "node": {
      "type": "object",
      "allOf": [
        {
          "properties": {
            "Parent": {
              "type": "string"
            },
            "RotateAngle": {
              "type": "number"
            },
            "Width": {
              "type": "number"
            },
            "Height": {
              "type": "number"
            },
            "OffsetX": {
              "type": "number"
            },
            "OffsetY": {
              "type": "number"
            },
            "Shape": {
              "$ref": "#/definitions/shape"
            },
            "Ports": {
              "type": "array",
              "items": {}
            },
            "Pivot": {
              "$ref": "#/definitions/point"
            },
            "BorderWidth": {
              "type": "integer"
            },
            "BorderDashArray": {
              "type": "string"
            },
            "Constraints": {
              "type": "integer"
            }
          },
          "required": [
            "Shape"
          ]
        },
        {
          "$ref": "#/definitions/node_base"
        }
      ]
    },
    "shape": {
      "type": "object",
      "properties": {
        "Type": {
          "type": "string",
          "enum": [ "Text", "Bpmn", "Flow", "Path", "Basic" ]
        },
        "Shape": {
          "type": "string",
          "enum": [
            "Gateway",
            "DataObject",
            "DataSource",
            "Ellipse",
            "Triangle",
            "Pentagon",
            "Rectangle",
            "Heptagon",
            "Octagon",
            "Trapezoid",
            "Decagon",
            "Parallelogram",
            "DirectData",
            "Sort",
            "MultiDocument",
            "Collate",
            "SummingJunction",
            "Or",
            "InternalStorage",
            "Extract",
            "Merge",
            "SequentialAccessStorage",
            "Data",
            "Card",
            "SwimLane",
            "ManualOperation",
            "Document",
            "Process",
            "Decision",
            "OffPageReference",
            "PaperTap",
            "Event",
            "Terminator",
            "Task",
            "Message",
            "PreDefinedProcess",
            "SequentialData",
            "Activity",
            "Annotation",
            "Annotation2",
            "Delay"
          ]
        },
        "Annotations": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/annotation"
          }
        },
        "Event": {
          "$ref": "#/definitions/event"
        },
        "Activity": {
          "type": "object",
          "properties": {
            "Activity": {
              "enum": [ "None", "Task", "SubProcess" ]
            },
            "SubProcess": {
              "type": "object",
              "properties": {
                "Type": {
                  "enum": [ "Transaction" ]
                },
                "Events": {
                  "type": "array",
                  "items": {
                    "$ref": "#/definitions/event"
                  }
                }
              }
            }
          }
        },
        "Gateway": {
          "type": "object",
          "properties": {
            "Type": {
              "enum": [
                "Parallel",
                "Exclusive",
                "Inclusive",
                "Complex",
                "EventBased",
                "ExclusiveEventBased",
                "ParallelEventBased"
              ]
            }
          },
          "required": [ "Type" ]
        },
        "Data": { "type": "string" },
        "Lanes": {
          "type": "array",
          "items": {
            "properties": {
              "Id": { "type": "string" },
              "Children": {
                "type": "array",
                "items": {
                  "$ref": "#/definitions/node_base"
                }
              },
              "Height": { "type": "number" },
              "Width": { "type": "number" },
              "Header": {
                "type": "object",
                "properties": {
                  "Annotation": {
                    "type": "object",
                    "properties": { "Content": { "type": "string" } }
                  },
                  "Width": { "type": "number" }
                }
              }
            }
          }
        },
        "Phases": {
          "type": "array",
          "items": {
            "properties": {
              "Id": { "type": "string" },
              "Offset": { "type": "number" },
              "Header": {
                "type": "object",
                "properties": {
                  "Content": {
                    "type": "object",
                    "properties": { "Content": { "type": "string" } }
                  }
                }
              }
            }
          }
        }
      },
      "required": [ "Type" ]
    },
    "connector": {
      "type": "object",
      "allOf": [
        {
          "properties": {
            "LineDashArray": {
              "type": "string"
            },
            "TargetDecorator": {
              "$ref": "#/definitions/decorator"
            },
            "SourceDecorator": {
              "$ref": "#/definitions/decorator"
            },
            "LineWidth": {
              "type": "integer"
            },
            "Constraints": {
              "type": "integer"
            },
            "Segments": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "Type": {
                    "type": "string"
                  },
                  "Points": {
                    "type": "array",
                    "items": {
                      "$ref": "#/definitions/point"
                    }
                  }
                },
                "required": [
                  "Type"
                ]
              }
            },
            "CornerRadius": {
              "type": "number"
            },
            "SourcePoint": {
              "$ref": "#/definitions/point"
            },
            "TargetPoint": {
              "$ref": "#/definitions/point"
            },
            "TargetID": {
              "type": "string"
            },
            "SourceID": {
              "type": "string"
            }
          },
          "required": [
            "TargetID",
            "SourceID"
          ]
        },
        {
          "$ref": "#/definitions/node_base"
        }
      ]
    },
    "alignment": {
      "type": "string",
      "enum": [
        "Center",
        "Left",
        "Right",
        "Top",
        "Bottom"
      ]
    },
    "style": {
      "type": "object",
      "properties": {
        "Fill": {
          "type": "string",
          "format": "color"
        },
        "StrokeColor": {
          "type": "string",
          "format": "color"
        },
        "Color": {
          "type": "string",
          "format": "color"
        },
        "StrokeWidth": { "type": "number" },
        "StrokeDashArray": { "type": "string" },
        "FontSize": { "type": "number" }
      }
    },
    "annotation": {
      "type": "object",
      "properties": {
        "Style": {
          "$ref": "#/definitions/style"
        },
        "VerticalAlignment": {
          "$ref": "#/definitions/alignment"
        },
        "HorizontalAlignment": {
          "$ref": "#/definitions/alignment"
        },
        "Constraints": { "type": "integer" },
        "Content": {
          "type": "string"
        },
        "Offset": {
          "$ref": "#/definitions/point"
        }
      },
      "margin": {
        "type": "object",
        "properties": {
          "Top": {
            "type": "number"
          },
          "Left": {
            "type": "number"
          },
          "Right": {
            "type": "number"
          },
          "Bottom": {
            "type": "number"
          }
        }
      }
    },
    "decorator": {
      "type": "object",
      "properties": {
        "Shape": {
          "type": "string"
        },
        "Width": {
          "type": "integer"
        },
        "Height": {
          "type": "integer"
        },
        "BorderWidth": {
          "type": "integer"
        }
      }
    },
    "point": {
      "type": "object",
      "properties": {
        "X": {
          "type": "number"
        },
        "Y": {
          "type": "number"
        }
      },
      "required": [
        "X",
        "Y"
      ]
    },
    "workflow": {
      "type": "object",
      "properties": {
        "ScrollSettings": {
          "type": "object",
          "properties": {
            "CurrentZoom": {
              "type": "number"
            },
            "HorizontalOffset": {
              "type": "number"
            },
            "VerticalOffset": {
              "type": "number"
            }
          }
        },
        "Connectors": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/connector"
          }
        },
        "Timestamp": { "type": "number" },
        "Nodes": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/node"
          }
        }
      },
      "required": [
        "Connectors",
        "Nodes"
      ]
    },
    "privileges": {
      "type": "object",
      "properties": {
        "Privileges": {
          "type": "object",
          "description": "Restrict element to authorized users",
          "properties": {
            "Rule": {
              "type": "string",
              "description": "Javascript expression, see rules"
            },
            "Roles": {
              "type": "array",
              "items": { "type": "string" },
              "description": "List of authorized roles"
            }
          }
        }
      }
    },
    "axis": {
      "description": "Axis name or array of axes names.",
      "type": [ "array", "string" ],
      "items": {
        "type": "string",
        "pattern": "^[A-Za-z][\\w]*$",
        "uniqueItems": true
      },
      "pattern": "^[A-Za-z][\\w]*$"
    },
    "chart-type": {
      "type": "string",
      "default": "Column",
      "enum": [
        "Pie",
        "Bar",
        "StackingStepArea",
        "StackingBar",
        "Line",
        "StepLine",
        "StackingLine",
        "Funnel",
        "Column",
        "StackingColumn100",
        "StackingBar100",
        "StackingArea100",
        "Bubble",
        "Pareto",
        "Pyramid",
        "StackingColumn",
        "Area",
        "Spline",
        "SplineArea",
        "StackingArea",
        "Doughnut",
        "HalfDoughnut",
        "Polar",
        "Radar",
        "StepArea"
      ]
    },
    "localized_string": {
      "oneOf": [
        { "type": "string" },
        {
          "type": "object",
          "patternProperties": { "^[A-Za-z][\\w]*$": { "type": "string" } }
        }
      ]
    },
    "axis_value": {
      "description": "Axis value.",
      "type": "object",
      "patternProperties": {
        "^[A-Za-z][\\w]*$": {
          "type": [ "array", "string", "integer" ],
          "pattern": "^[a-zA-Z0-9*\\#\\.]+([\\-]{0,1}[a-zA-Z0-9\\*\\#\\.]+)?$",
          "items": {
            "type": [ "string", "integer" ],
            "pattern": "^[a-zA-Z0-9*\\#\\.]+([\\-]{0,1}[a-zA-Z0-9\\*\\#\\.]+)?$",
            "uniqueItems": true,
            "links": [
              {

              }
            ]
          }
        }
      },
      "minProperties": 1
    },
    "base": {
      "type": "object",
      "properties": {
        "Name": {
          "type": "string",
          "pattern": "^[A-Za-z][\\w\\-.]*$"
        },
        "Title": {
          "type": "string"
        },
        "Options": {
          "type": "object"
        },
        "Disabled": {
          "type": "boolean",
          "default": false
        },
        "ResourceType": {
          "type": "string"
        }
      },
      "required": [
        "Name",
        "Title"
      ],
      "links": [
        {
          "href": "{Name}",
          "rel": "self"
        }
      ]
    },
    "code": {
      "allOf": [
        { "$ref": "#/definitions/base" },
        {
          "properties": {
            "Type": {
              "type": "string",
              "description": "Implementation type and assembly."
            }
          },
          "required": [
            "Type"
          ]
        }
      ]
    }
  },
  "properties": {
    "Currencies": {
      "type": "array",
      "items": {
        "allOf": [
          { "$ref": "#/definitions/base" },
          {
            "properties": {
              "Symbol": { "type": "string" }
            }
          }
        ]
      }
    },
    "Attributes": {
      "type": "array",
      "items": {
        "allOf": [
          { "$ref": "#/definitions/base" },
          {
            "properties": {
              "DataType": { "type": "string" }
            }
          }
        ]
      }
    },
    "Folders": {
      "type": "array",
      "items": {
        "allOf": [
          { "$ref": "#/definitions/base" },
          { "$ref": "#/definitions/privileges" },
          {
            "properties": {
              "Filters": {
                "type": "object",
                "properties": {
                  "Cube": {
                    "type": "string"
                  },
                  "Axes": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                }
              },
              "Columns": {
                "type": "array",
                "items": {
                  "properties": {
                    "Name": {
                      "type": "string",
                      "pattern": "^[A-Za-z]\\w*$",
                      "enum": [ "number", "subject", "value", "owner", "sender", "received", "receivedAgo", "replied", "state", "issued", "issuedAgo" ]
                    },
                    "Title": {
                      "type": "string"
                    },
                    "ResourceType": {
                      "type": "string"
                    },
                    "Type": {
                      "type": "string",
                      "enum": [
                        "Date",
                        "Boolean",
                        "Decimal",
                        "Text"
                      ]
                    }
                  },
                  "required": [ "Name" ]
                },
                "Icon": {
                  "type": "string"
                }
              }
            }
          }
        ]
      },
      "additionalProperties": false
    },
    "Holidays": {
      "type": "array",
      "items": {
        "allOf": [
          { "$ref": "#/definitions/base" },
          {
            "properties": {
              "FromDate": {
                "type": "string"
              },
              "ToDate": {
                "type": "string"
              }
            }
          }
        ]
      }
    },
    "States": {
      "type": "array",
      "items": {
        "allOf": [
          { "$ref": "#/definitions/base" },
          {
            "properties": {
              "Past": {
                "type": "string"
              },
              "Future": {
                "type": "string"
              },
              "BackgroundColor": {
                "type": "string",
                "format": "color"
              },
              "Color": {
                "type": "string",
                "format": "color"
              },
              "Shape": {
                "type": "string",
                "description": "SVG"
              }
            }
          }
        ]
      },
      "additionalProperties": false
    },
    "Actions": {
      "type": "array",
      "items": {
        "allOf": [
          { "$ref": "#/definitions/code" },
          {
            "properties": {
              "Multiple": {
                "type": "boolean"
              },
              "Past": {
                "type": "string"
              },
              "You": {
                "type": "string"
              },
              "YouMale": {
                "type": "string"
              },
              "YouFemale": {
                "type": "string"
              },
              "Shape": {
                "type": "string",
                "description": "SVG"
              },
              "Color": {
                "type": "string",
                "format": "color"
              },
              "BackgoundColor": {
                "type": "string",
                "format": "color"
              },
              "Verb": {
                "type": "string"
              },
              "TitleMale": {
                "type": "string"
              },
              "TitleFemale": {
                "type": "string"
              },
              "Adjective": {
                "type": "string"
              },
              "AdjectivePlural": {
                "type": "string"
              },
              "Loggable": {
                "type": "boolean"
              },
              "Messaging": {
                "type": "boolean"
              }
            }
          }
        ]
      },
      "additionalProperties": false
    },
    "Roles": {
      "type": "array",
      "items": {
        "allOf": [
          { "$ref": "#/definitions/base" },
          {
            "properties": {
              "DataType": {
                "Type": "string"
              },
              "SequencePolicy": {
                "enum": [ "Strict", "Earlier", "Higher" ],
                "default": "Strict"
              },
              "Priority": {
                "description": "Sequence policy higher value",
                "Type": "number",
                "minimum": -128,
                "maximum": 127
              },
              "Positions": {
                "type": "object",
                "patternProperties": {
                  "^.*$": {
                    "type": [ "string", "array" ],
                    "items": { "type": [ "string" ] }
                  }
                },
                "additionalProperties": false
              }
            },
            "required": [
              "DataType"
            ]
          }
        ]
      },
      "additionalProperties": false
    },
    "Controls": {
      "type": "array",
      "items": {
        "allOf": [
          { "$ref": "#/definitions/code" },
          {
            "properties": {
              "Visible": { "type": "boolean" },
              "System": { "type": "boolean" },
              "Template": {
                "type": "string"
              }
            }
          }
        ]
      }
    },
    "Forms": {
      "type": "array",
      "items": {
        "allOf": [
          { "$ref": "#/definitions/code" },
          { "$ref": "#/definitions/privileges" },
          {
            "properties": {
              "Format": {
                "type": "string"
              },
              "Group": {
                "$ref": "#/definitions/localized_string"
              },
              "Description": {
                "$ref": "#/definitions/localized_string"
              },
              "Ordinal": { "type": "integer" },
              "Template": {
                "type": "string"
              },
              "Position": {
                "type": "string",
                "enum": [ "Require", "Ask", "None" ]
              },
              "Workflow": {
                "$ref": "#/definitions/workflow"
              },
              "Icon": {
                "type": "string"
              },
              "Guide": {
                "type": "string"
              },
              "Cubes": {
                "type": "array",
                "items": {
                  "type": "object"
                }
              },
              "Rules": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "Roles": {
                      "type": "array",
                      "items": { "type": "string" }
                    },
                    "Rule": { "type": "string" },
                    "Title": { "type": "string" },
                    "Name": { "type": "string" }
                  },
                  "required": [ "Name" ]
                }
              },
              "History": {
                "type": "array",
                "items": {
                  "$ref": "#/definitions/workflow"
                }
              }
            },
            "required": [
              "Format",
              "Workflow"
            ]
          }
        ]
      },
      "additionalProperties": false
    },
    "Reports": {
      "type": "array",
      "items": {
        "allOf": [
          { "$ref": "#/definitions/code" },
          { "$ref": "#/definitions/privileges" },
          {
            "properties": {
              "Template": {
                "type": "string"
              },
              "Icon": { "type": "string" },
              "ArgumentsTemplate": { "type": "string" },
              "Guide": {
                "type": "string"
              }
            }
          }
        ]
      },
      "additionalProperties": false
    },
    "Types": {
      "type": "array",
      "items": {
        "allOf": [
          { "$ref": "#/definitions/code" },
          {
            "properties": {
              "Assignable": {
                "type": "boolean",
                "default": true
              },
              "Groups": {
                "type": "array",
                "items": {
                  "properties": {
                    "Name": { "type": "string" },
                    "Title": { "type": "string" },
                    "items": {
                      "type": "array",
                      "items": { "type": "string" }
                    }
                  }
                }
              },
              "Patterns": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "Expression": {
                      "type": "string",
                      "description": "Regular expression"
                    },
                    "Name": { "type": "string" },
                    "Title": { "type": "string" }
                  }
                }
              }
            }
          }
        ]
      },
      "additionalProperties": false
    },
    "Nodes": {
      "type": "array",
      "items": {
        "allOf": [
          { "$ref": "#/definitions/code" },
          {
            "properties": {
              "Visible": {
                "type": "boolean"
              },
              "Palette": {
                "type": "string"
              },
              "Shape": {
                "$ref": "#/definitions/shape"
              }
            },
            "required": [
              "Shape"
            ]
          }
        ]
      },
      "additionalProperties": false
    },
    "Cubes": {
      "type": "array",
      "items": {
        "allOf": [
          { "$ref": "#/definitions/code" },
          { "$ref": "#/definitions/privileges" },
          {
            "properties": {
              "Anomaly": {
                "enum": [ "Positions", "Recipients", "None" ],
                "description": "Audience of notifications in case of anomaly"
              },
              "Scope": {
                "enum": [ "Positions", "Patterns", "None" ],
                "description": "Restrict data access based on user role or pattern privileges"
              },
              "Schedule": {
                "type": "string",
                "pattern": "/d/d:/d/d:/d/d"
              },
              "Constraints": {
                "type": "array",
                "description": "Axes dependencies",
                "items": {
                  "properties": {
                    "Condition": {
                      "$ref": "#/definitions/axis_value"
                    },
                    "Projection": {
                      "$ref": "#/definitions/axis_value"
                    }
                  },
                  "required": [ "Condition", "Projection" ]
                }
              },
              "YAxis": {
                "type": "object",
                "properties": {
                  "Type": {
                    "enum": [ "None", "Number", "Currency" ],
                    "default": "Currency"
                  },
                  "Title": {
                    "type": "string"
                  }
                }
              },
              "CurrencyCode": { "type": "string" },
              "Template": {
                "type": "string",
                "description": "Cube info matriix override"
              },
              "Axes": {
                "type": "array",
                "items": {
                  "allOf": [
                    { "$ref": "#/definitions/base" },
                    {
                      "properties": {
                        "SelectionMode": {
                          "description": "User interaction in filters",
                          "enum": [ "Single", "Pattern", "Multiple", "Search", "None" ]
                        },
                        "Combination": {
                          "type": "boolean",
                          "description": "Is an account segment"
                        },
                        "Searchable": { "type": "boolean" },
                        "Aliases": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          }
                        },
                        "Indexable": {
                          "type": "boolean",
                          "description": "Meaningful in Indices queries. Set false for cube-only axes"
                        },
                        "DescendentOf": { "type": "string" },
                        "Sensitive": {
                          "type": "boolean",
                          "description": "Meaningful in anomaly test. True by default"
                        },
                        "DataType": {
                          "type": "string",
                          "description": "Name of type associated with this axis"
                        }
                      },
                      "required": [ "DataType" ]
                    }
                  ]
                },
                "additionalProperties": false
              },
              "Patterns": {
                "type": "array",
                "items": {
                  "allOf": [
                    { "$ref": "#/definitions/base" },
                    {
                      "properties": {
                        "Axes": {
                          "$ref": "#/definitions/axis_value"
                        },
                        "Roles": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          }
                        },
                        "Rule": {
                          "type": "string",
                          "description": "Javascript expression"
                        }
                      },
                      "required": [ "Roles", "Axes" ]
                    }
                  ]
                },
                "additionalProperties": false
              },
              "Views": {
                "type": "array",
                "items": {
                  "allOf": [
                    { "$ref": "#/definitions/base" },
                    { "$ref": "#/definitions/privileges" },
                    {
                      "properties": {
                        "Icon": { "type": "string" },
                        "Guide": { "type": "string" },
                        "Filters": {
                          "$ref": "#/definitions/axis_value"
                        },
                        "Type": {
                          "type": "string",
                          "default": "Chart",
                          "enum": [
                            "Pivot",
                            "Spreadsheet",
                            "Grid",
                            "Chart"
                          ]
                        },
                        "ChartType": {
                          "$ref": "#/definitions/chart-type"
                        },
                        "IndicesChartType": {
                          "$ref": "#/definitions/chart-type"
                        },
                        "Series": {
                          "$ref": "#/definitions/axis"
                        },
                        "XAxis": {
                          "$ref": "#/definitions/axis"
                        },
                        "Indices": {
                          "description": "Cube index name or array of indices names.",
                          "anyOf": [
                            {
                              "type": "array",
                              "items": {
                                "type": "string",
                                "pattern": "^[A-Za-z]([\\-_]{0,1}[a-zA-Z0-9]+)+$",
                                "uniqueItems": true
                              }
                            },
                            {
                              "type": "string",
                              "pattern": "^[A-Za-z]([\\-_]{0,1}[a-zA-Z0-9]+)+$"
                            }
                          ]
                        }
                      },
                      "required": [ "XAxis" ]
                    }
                  ]
                },
                "additionalProperties": false
              },
              "Indices": {
                "type": "array",
                "items": {
                  "allOf": [
                    { "$ref": "#/definitions/base" },
                    {
                      "properties": {
                        "Accumulate": { "type": "boolean" },
                        "Hidden": { "type": "boolean" }
                      }
                    }
                  ]
                }
              }
            },
            "required": [
              "Axes"
            ]
          }
        ]
      },
      "additionalProperties": false
    },
    "Rules": {
      "type": "array",
      "items": {
        "allOf": [
          { "$ref": "#/definitions/code" },
          {
          }
        ]
      },
      "additionalProperties": false
    },
    "Policies": {
      "type": "array",
      "items": {
        "allOf": [
          { "$ref": "#/definitions/code" },
          {
          }
        ]
      },
      "additionalProperties": false
    },
    "Sources": {
      "type": "array",
      "items": {
        "allOf": [
          { "$ref": "#/definitions/code" },
          {
            "properties": { "RegularExpression": { "type": "string" } }
          }
        ]
      },
      "additionalProperties": false
    },
    "Utilities": {
      "type": "array",
      "items": {
        "allOf": [
          { "$ref": "#/definitions/code" },
          { "$ref": "#/definitions/privileges" },
          {
            "properties": {
              "Template": {
                "type": "string"
              },
              "Icon": { "type": "string" },
              "Guide": {
                "type": "string"
              }
            }
          }
        ]
      },
      "additionalProperties": false
    },
    "Widgets": {
      "type": "array",
      "items": {
        "allOf": [
          { "$ref": "#/definitions/code" },
          { "$ref": "#/definitions/privileges" },
          {
            "properties": {
              "Guide": { "type": "string" },
              "Template": {
                "type": "string"
              },
              "Cols": { "type": "number" },
              "Rows": { "type": "number" }
            }
          }
        ]
      },
      "additionalProperties": false
    },
    "Views": {
      "type": "array",
      "items": {
        "allOf": [
          { "$ref": "#/definitions/code" },
          { "$ref": "#/definitions/privileges" },
          {
            "properties": {
              "Guide": { "type": "string" },
              "Template": {
                "type": "string"
              },
              "Forms": {
                "type": "array",
                "items": { "type": "string" }
              }
            }
          }
        ]
      },
      "additionalProperties": false
    },
    "Implementation": {
      "patternProperties": {
        "^[A-Za-z][\\w]*$": {
          "type": "object"
        }
      }
    },
    "Guides": {
      "type": "array",
      "items": {
        "allOf": [
          { "$ref": "#/definitions/privileges" },
          {
            "properties": {
              "Name": {
                "type": "string",
                "pattern": "^[A-Za-z][\\w\\-.]*$"
              },
              "Title": {
                "type": "string"
              },
              "Disabled": {
                "type": "boolean",
                "default": false
              },
              "ResourceType": {
                "type": "string"
              },
              "Steps": {
                "type": "array",
                "items": {
                  "allOf": [
                    { "$ref": "#/definitions/privileges" },
                    {
                      "properties": {
                        "Selector": {
                          "type": "string"
                        },
                        "Content": {
                          "type": "string"
                        },
                        "ContentMale": {
                          "type": "string"
                        },
                        "ContentFemale": {
                          "type": "string"
                        },
                        "TitleMale": {
                          "type": "string"
                        },
                        "TitleFemale": {
                          "type": "string"
                        },
                        "Position": {
                          "enum": [ "Above", "End", "Start", "Below" ]
                        },
                        "Navigate": {
                          "type": "string"
                        },
                        "Title": {
                          "type": "string"
                        },
                        "ResourceType": {
                          "type": "string"
                        },
                        "Execute": { "type": "boolean" }
                      },
                      "required": [
                        "Content"
                      ]
                    }
                  ]
                },
                "additionalProperties": false
              },
              "Mode": {
                "enum": [ "Eager", "Menu", "Private" ]
              }
            },
            "required": [
              "Steps",
              "Name"
            ]
          }
        ]
      },
      "additionalProperties": false
    }
  }
}
